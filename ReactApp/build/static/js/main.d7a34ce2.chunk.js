(this.webpackJsonpreact_app=this.webpackJsonpreact_app||[]).push([[0],{14:function(e,t,n){},15:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),r=n(7),o=n.n(r),i=n(8),c=n(1),u=n(2),l=n(4),m=n(3),p=n(5),h=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("p",null," ",this.props.message.who," : ",this.props.message.message))}}]),t}(a.Component),d=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return this.props.messages.map((function(e){return s.a.createElement(h,{key:e.message,message:e})}))}}]),t}(a.Component),g=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(n=Object(l.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).state={prompt:""},n.onSubmit=function(e){e.preventDefault(),n.props.addMessage(n.state.prompt),n.setState({prompt:""})},n.onEnd=function(e){e.preventDefault(),n.props.addMessage("#reset"),n.setState({prompt:""})},n.onChange=function(e){return n.setState({prompt:e.target.value})},n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("form",{onSubmit:this.onSubmit},s.a.createElement("input",{type:"text",name:"prompt",value:this.state.prompt,onChange:this.onChange}),s.a.createElement("input",{type:"submit",value:"Submit",className:"btn"})),s.a.createElement("button",{onClick:this.onEnd}," End"))}}]),t}(a.Component),f=(n(14),function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(n=Object(l.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).state={send:!0,username:"Neeserg",userId:window.userId,nextTurn:"bot",messages:[]},n.go_to_End=function(){var e="http://"+window.location.host+"/end/"+n.state.userId;window.location.assign(e)},n.get_latest=function(){if(0==n.state.messages.length)return"hi";var e=n.state.messages.length-1;return n.state.messages[e].message},n.addMessage=function(e){var t=n.state.nextTurn;"user"===n.state.nextTurn?n.setState({nextTurn:"bot"}):("End Of Conversation"===e&&n.go_to_End(),n.setState({nextTurn:"user"})),n.setState({messages:[].concat(Object(i.a)(n.state.messages),[{message:e,who:t}])}),console.log(n.state)},n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return"bot"===this.state.nextTurn?(fetch(window.location.href,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({userId:this.state.userId,message:this.get_latest()})}).then((function(e){return e.json()})).then((function(t){return e.addMessage(t.message)})),s.a.createElement("div",null,s.a.createElement(d,{key:this.state.userId,messages:this.state.messages}))):s.a.createElement("div",null,s.a.createElement(d,{key:this.state.userId,messages:this.state.messages}),s.a.createElement(g,{addMessage:this.addMessage}))}}]),t}(a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(s.a.createElement(f,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},9:function(e,t,n){e.exports=n(15)}},[[9,1,2]]]);
//# sourceMappingURL=main.d7a34ce2.chunk.js.map